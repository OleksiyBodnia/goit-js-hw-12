{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\n\nconst listOfPhotos = document.querySelector('.container ul');\nconst loader = document.querySelector('.loader');\nconst form = document.querySelector('.form');\nconst input = document.querySelector('input');\n\nconst loadMoreBtn = document.createElement('button');\nloadMoreBtn.textContent = \"Load more\"\nloadMoreBtn.style.margin = \"0 auto\";\nloadMoreBtn.style.marginTop = \"15px\";\nloadMoreBtn.style.width = \"150px\";\nlistOfPhotos.after(loadMoreBtn);\nloadMoreBtn.style.display = 'none';\n\nlet inputValue = '';\nlet page = 1;\nconst perPage = 15;\nconst totalPages = Math.ceil(100/perPage);\n\nconst searchDefaultParam = {\n    key: '42291336-b4c9ef387c9d7e209159058e7',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n}\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    listOfPhotos.innerHTML = '';\n    inputValue = input.value.trim();\n\n    if (!inputValue){\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term',\n            position: 'topRight'\n        });\n    } else {\n        loader.style.display = 'block';\n        loadMoreBtn.style.display = 'none';\n\n        try {\n            const response = await axios.get(`?`, {\n                params: {\n                    q: inputValue,\n                    ...searchDefaultParam,\n                    page: page,\n                    per_page: perPage\n                }\n            })\n            if (!response.data.hits || response.data.hits.length === 0) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: \"topRight\",\n                    icon: \"\"\n                });\n            } else {\n                renderingPhotos(response.data.hits);\n                loadMoreBtn.style.display = 'block';\n            }\n\n            loader.style.display = 'none';\n        } catch (error) {\n            loader.style.display = 'none';\n            loadMoreBtn.style.display = 'none';\n            console.log(error);\n        }\n    }\n\n    form.reset();\n});\n\nconst renderingPhotos = data => {\n    data.forEach(element => {\n\n        const murkup = `<li class=\"photo\">\n            <a href=\"${element.largeImageURL}\" data-lightbox=\"photos\">\n                <img src=\"${element.webformatURL}\" alt=\"${element.tags}\" title=\"${element.tags}\" class=\"img\">\n            </a>\n            <ul class=\"list\">\n                <li class=\"item\"><h2>Likes <span>${element.likes}</span></h2></li>\n                <li class=\"item\"><h2>Views <span>${element.views}</span></h2></li>\n                <li class=\"item\"><h2>Comments <span>${element.comments}</span></h2></li>\n                <li class=\"item\"><h2>Downloads <span>${element.downloads}</span></h2></li>\n            </ul>\n        </li>`;\n\n        listOfPhotos.insertAdjacentHTML('beforeend', murkup);\n\n    });\n\n    const lightbox = new SimpleLightbox('.photos a', {});\n\n    lightbox.refresh();\n}\n\nloadMoreBtn.addEventListener('click', async (event) => {\n    loader.style.display = 'block';\n    if (page > totalPages) {\n        loader.style.display = 'none';\n        loadMoreBtn.style.display = 'none';\n        return iziToast.error({\n          position: \"topRight\",\n          message: \"We're sorry, there are no more posts to load\"\n        });\n      }\n\n    try {\n        page++;\n        const response = await axios.get(`?`, {\n            params: {\n                q: inputValue,\n                ...searchDefaultParam,\n                page: page,\n                per_page: perPage\n            }\n        })        \n        loader.style.display = 'none';\n        renderingPhotos(response.data.hits);\n        const cardHeight = listOfPhotos.firstElementChild.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: cardHeight * 3, \n            behavior: 'smooth'\n        });\n    } catch (error){\n        loader.style.display = 'none';\n        console.log(error);\n    }\n})\n\n\n"],"names":["listOfPhotos","loader","form","input","loadMoreBtn","inputValue","page","perPage","totalPages","searchDefaultParam","axios","event","iziToast","response","renderingPhotos","error","data","element","murkup","SimpleLightbox","cardHeight"],"mappings":"owBAOA,MAAMA,EAAe,SAAS,cAAc,eAAe,EACrDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,OAAO,EAEtCC,EAAc,SAAS,cAAc,QAAQ,EACnDA,EAAY,YAAc,YAC1BA,EAAY,MAAM,OAAS,SAC3BA,EAAY,MAAM,UAAY,OAC9BA,EAAY,MAAM,MAAQ,QAC1BJ,EAAa,MAAMI,CAAW,EAC9BA,EAAY,MAAM,QAAU,OAE5B,IAAIC,EAAa,GACbC,EAAO,EACX,MAAMC,EAAU,GACVC,EAAa,KAAK,KAAK,IAAID,CAAO,EAElCE,EAAqB,CACvB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EACAC,EAAM,SAAS,QAAU,2BAEzBR,EAAK,iBAAiB,SAAU,MAAOS,GAAU,CAK7C,GAJAA,EAAM,eAAc,EACpBX,EAAa,UAAY,GACzBK,EAAaF,EAAM,MAAM,OAErB,CAACE,EACDO,EAAS,MAAM,CACX,MAAO,QACP,QAAS,6BACT,SAAU,UACtB,CAAS,MACE,CACHX,EAAO,MAAM,QAAU,QACvBG,EAAY,MAAM,QAAU,OAE5B,GAAI,CACA,MAAMS,EAAW,MAAMH,EAAM,IAAI,IAAK,CAClC,OAAQ,CACJ,EAAGL,EACH,GAAGI,EACH,KAAMH,EACN,SAAUC,CACb,CACjB,CAAa,EACG,CAACM,EAAS,KAAK,MAAQA,EAAS,KAAK,KAAK,SAAW,EACrDD,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,KAAM,EAC1B,CAAiB,GAEDE,EAAgBD,EAAS,KAAK,IAAI,EAClCT,EAAY,MAAM,QAAU,SAGhCH,EAAO,MAAM,QAAU,MAC1B,OAAQc,EAAO,CACZd,EAAO,MAAM,QAAU,OACvBG,EAAY,MAAM,QAAU,OAC5B,QAAQ,IAAIW,CAAK,CACpB,CACJ,CAEDb,EAAK,MAAK,CACd,CAAC,EAED,MAAMY,EAAkBE,GAAQ,CAC5BA,EAAK,QAAQC,GAAW,CAEpB,MAAMC,EAAS;AAAA,uBACAD,EAAQ,aAAa;AAAA,4BAChBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI,YAAYA,EAAQ,IAAI;AAAA;AAAA;AAAA,mDAG3CA,EAAQ,KAAK;AAAA,mDACbA,EAAQ,KAAK;AAAA,sDACVA,EAAQ,QAAQ;AAAA,uDACfA,EAAQ,SAAS;AAAA;AAAA,eAIhEjB,EAAa,mBAAmB,YAAakB,CAAM,CAE3D,CAAK,EAEgB,IAAIC,EAAe,YAAa,CAAE,CAAA,EAE1C,QAAO,CACpB,EAEAf,EAAY,iBAAiB,QAAS,MAAOO,GAAU,CAEnD,GADAV,EAAO,MAAM,QAAU,QACnBK,EAAOE,EACP,OAAAP,EAAO,MAAM,QAAU,OACvBG,EAAY,MAAM,QAAU,OACrBQ,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,8CACnB,CAAS,EAGL,GAAI,CACAN,IACA,MAAMO,EAAW,MAAMH,EAAM,IAAI,IAAK,CAClC,OAAQ,CACJ,EAAGL,EACH,GAAGI,EACH,KAAMH,EACN,SAAUC,CACb,CACb,CAAS,EACDN,EAAO,MAAM,QAAU,OACvBa,EAAgBD,EAAS,KAAK,IAAI,EAClC,MAAMO,EAAapB,EAAa,kBAAkB,sBAAqB,EAAG,OAE1E,OAAO,SAAS,CACZ,IAAKoB,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,OAAQL,EAAM,CACXd,EAAO,MAAM,QAAU,OACvB,QAAQ,IAAIc,CAAK,CACpB,CACL,CAAC"}